// ==UserScript==
// @name Lethak's Userscript for facebook.com (ad suppression)
// @namespace facebookFeedAdSuppression
// @author LethaK Maas
// @description Userscript automatically removing Ads from your Facebook feed
// @include https://www.facebook.com*
// @homepage https://github.com/lethak/facebookFeedAdSuppression-userscript
// @downloadURL https://raw.githubusercontent.com/lethak/facebookFeedAdSuppression-userscript/master/dist/facebookFeedAdSuppression.user.js
// @updateURL https://raw.githubusercontent.com/lethak/facebookFeedAdSuppression-userscript/master/dist/facebookFeedAdSuppression.meta.js
// @icon https://i.imgur.com/UAyItAe.png
// @grant none
// @run-at document-end
// @version 2019.8.33
// ==/UserScript==
!function(t){var n={};function o(i){if(n[i])return n[i].exports;var e=n[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=n,o.i=function(t){return t},o.d=function(t,n,i){o.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},o.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="/",o(o.s=2)}([function(t,n,o){function i(t,n){if(t!==n)throw new TypeError("Cannot instantiate an arrow function")}!function(){var t=this,n=o(3),e=n.getRandomInt,r=n.randomId,s=null,c=function(){var t=this;this.loopCreatedAt=0,s&&(u(function(){i(this,t),console.debug("[AD SUPRESSION] loopStop ... ")}.bind(this)),clearInterval(s),s=null)},u=function(t){return null},d=function(t){var n=this,o=function t(n){var o,e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=[],c=n.querySelector("span:first-of-type");if(!c||"SPAN"!==c.tagName)return"";c.childElementCount&&!c.innerText?c.children.forEach(function(n){i(this,e),s.push(t(n,r))}.bind(this)):c.innerText&&(0!==(o=c).offsetWidth||0!==o.offsetHeight)&&(u(function(){i(this,e),c.style.backgroundColor="red"}.bind(this)),s.push(""+String(c.innerText)));var d=""+String(s.join(""));return u(function(){i(this,e),c.style.backgroundColor="red",r||console.debug(" extractDomObfuscatedText = ",d)}.bind(this)),d}(t),e=o.match(/[0-9]/gi),r=o.match(/\s/gi),s=!(""===o||!e||!e.length),c=!(""===o||!r||!r.length),d=o&&!s&&!c;return u(function(){i(this,n),d&&console.warn("[AD SUPRESSION] Visible text without numeric nor space value = ",o)}.bind(this)),d},l=function(){var t=this;try{document.querySelectorAll('div[id^="hyperfeed_story_id_"]:not(.'+String(a)+")").forEach(function(n){i(this,t),u(function(){i(this,t),n.querySelectorAll("div:first-of-type").forEach(function(n){i(this,t),n.style.backgroundColor="rgb(150, 150, 150)"}.bind(this))}.bind(this)),n.querySelectorAll('div[id^="fbfeed__sub__header__id_"]').forEach(function(o){i(this,t),u(function(){i(this,t),o.style.backgroundColor="purple"}.bind(this)),o.querySelectorAll('a[role="button"]:first-of-type').forEach(function(o){i(this,t),u(function(){i(this,t),o.style.backgroundColor="cyan"}.bind(this)),d(o)&&(n.classList.add(a),function(t){var n=this;u(function(){i(this,n),console.warn("[AD SUPRESSION] now removing story element = ",t)}.bind(this)),t&&t.parentNode&&t.parentNode.removeChild(t)}(n))}.bind(this))}.bind(this))}.bind(this))}catch(t){console.error("[AD SUPRESSION ERROR] : ",t.message," --- ",t)}};this.loopStart=function(){i(this,t);var n=(new Date).getTime();if(n-this.loopCreatedAt<1500)return null;c(),u(function(){i(this,t),console.debug("[AD SUPRESSION] loopStart ... ")}.bind(this)),this.loopCreatedAt=n,s=setInterval(function(){i(this,t),u(function(){i(this,t),console.debug("[AD SUPRESSION]  Loop tick !")}.bind(this)),l()}.bind(this),450)}.bind(this),c();var a=r(e(10,30));u(function(){i(this,t),console.warn("==== randomStoryCardProcessedCssClass ===== ",a)}.bind(this)),window.addEventListener("scroll",function(n){i(this,t),u(function(){i(this,t),console.debug("- window scrolled -",n)}.bind(this)),this.loopStart()}.bind(this)),this.loopStart()}()},function(t,n){if(void 0===o&&void 0!==window)var o=window;void 0===o.browser&&void 0!==o.chrome&&(o.browser=o.chrome)},function(t,n,o){o(1),o(0)},function(t,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),o.d(n,"randomId",function(){return i}),o.d(n,"getRandomInt",function(){return e});var i=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",i=o.length,e=0;e<t;e++)n+=o.charAt(Math.floor(Math.random()*i));return n},e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1))+t}}]);