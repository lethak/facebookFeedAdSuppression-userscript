// ==UserScript==
// @name Lethak's Userscript for facebook.com (ad suppression)
// @namespace facebookFeedAdSuppression
// @author LethaK Maas
// @description Userscript automatically removing Ads from your Facebook feed
// @include https://www.facebook.com*
// @homepage https://github.com/lethak/facebookFeedAdSuppression-userscript
// @downloadURL https://raw.githubusercontent.com/lethak/facebookFeedAdSuppression-userscript/master/dist/facebookFeedAdSuppression.user.js
// @updateURL https://raw.githubusercontent.com/lethak/facebookFeedAdSuppression-userscript/master/dist/facebookFeedAdSuppression.meta.js
// @icon https://i.imgur.com/UAyItAe.png
// @grant none
// @run-at document-end
// @version 2019.8.89
// ==/UserScript==
!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.i=function(t){return t},r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="/",r(r.s=2)}([function(t,n,r){function e(t,n){if(t!==n)throw new TypeError("Cannot instantiate an arrow function")}!function(){var t=this,n=r(3),o=n.getRandomInt,i=n.randomId,a=null,l=function(){var t=this;this.loopCreatedAt=0,a&&(u(function(){e(this,t),console.debug("[AD SUPRESSION] loopStop ... ")}.bind(this)),clearInterval(a),a=null)},u=function(t){return null},c=function(t){var n="";return null!==t&&(null!==t.getAttribute("data-content")?n=t.getAttribute("data-content"):t.innerText&&(n=t.innerText)),""+String(n)},s=function t(n){var r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[],l=n.querySelector('span:first-of-type, span[class^="timestampContent"]');if(!l)return"";if(!i&&0===l.childElementCount&&"A"===l.tagName)return u(function(){e(this,r),console.debug(" ======== extractDomObfuscatedText SOLO ======== ",l),l.style.backgroundColor="red"}.bind(this)),c(l);var s,d=c(l);if(l.childElementCount&&!d){var f=function(n){null!==n&&(u(function(){e(this,r),n.style.backgroundColor="rgb("+o(0,255)+", "+o(0,255)+", "+o(0,255)+")"}.bind(r)),a.push(t(n,!0)))},h=!0,v=!1,y=void 0;try{for(var b,S=l.children[Symbol.iterator]();!(h=(b=S.next()).done);h=!0){f(b.value)}}catch(t){v=!0,y=t}finally{try{!h&&S.return&&S.return()}finally{if(v)throw y}}}else""!==d&&(0!==(s=l).offsetWidth||0!==s.offsetHeight)&&a.push(d);var g=""+String(a.join(""));return u(function(){e(this,r),i||console.debug(" extractDomObfuscatedText = ",g)}.bind(this)),g},d=function(){var t=this;try{var n=function(n){u(function(){e(this,t);var r=!0,o=!1,i=void 0;try{for(var a,l=n.querySelectorAll("div:first-of-type")[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){a.value.style.backgroundColor="rgb(150, 150, 150)"}}catch(t){o=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}}.bind(t));var r=function(r){u(function(){e(this,t),r.style.backgroundColor="purple"}.bind(t));var o=r.querySelectorAll('a[role="button"]:first-of-type, a[rel="theater"][ajaxify]:first-of-type, a[href^="/events/"], a[data-video-channel-id]'),i=function(r){null!==r&&(u(function(){e(this,t),r.style.backgroundColor="cyan"}.bind(t)),function(t){var n=this,r=s(t,!1),o=r.match(/[0-9]/gi),i=r.match(/\s/gi),a=!(""===r||!o||!o.length),l=!(""===r||!i||!i.length),c=r&&!a&&!l&&r.length>1;return u(function(){e(this,n),c&&console.warn("[AD SUPRESSION] Visible text without numeric nor space value = ",r)}.bind(this)),c}(r)&&(n.classList.add(f),function(t){var n=this;u(function(){e(this,n),console.warn("[AD SUPRESSION] now removing story element = ",t)}.bind(this)),t&&t.parentNode&&t.parentNode.removeChild(t)}(n)))},a=!0,l=!1,c=void 0;try{for(var d,h=o[Symbol.iterator]();!(a=(d=h.next()).done);a=!0){i(d.value)}}catch(t){l=!0,c=t}finally{try{!a&&h.return&&h.return()}finally{if(l)throw c}}},o=!0,i=!1,a=void 0;try{for(var l,c=n.querySelectorAll('div[id^="fbfeed__sub__header__id_"]')[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){r(l.value)}}catch(t){i=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}},r=!0,o=!1,i=void 0;try{for(var a,l=document.querySelectorAll('div[id^="hyperfeed_story_id_"]:not(.'+String(f)+")")[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){n(a.value)}}catch(t){o=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}}catch(t){console.error("[AD SUPRESSION ERROR] : ",t.message," --- ",t)}};this.loopStart=function(){e(this,t);var n=(new Date).getTime();if(n-this.loopCreatedAt<1500)return null;l(),u(function(){e(this,t),console.debug("[AD SUPRESSION] loopStart ... ")}.bind(this)),this.loopCreatedAt=n,a=setInterval(function(){e(this,t),u(function(){e(this,t),console.debug("[AD SUPRESSION]  Loop tick !")}.bind(this)),d()}.bind(this),450)}.bind(this),l();var f=i(o(10,30));u(function(){e(this,t),console.warn("==== randomStoryCardProcessedCssClass ===== ",f)}.bind(this)),window.addEventListener("scroll",function(n){e(this,t),u(function(){e(this,t),console.debug("- window scrolled -",n)}.bind(this)),this.loopStart()}.bind(this)),this.loopStart()}()},function(t,n){if(void 0===r&&void 0!==window)var r=window;void 0===r.browser&&void 0!==r.chrome&&(r.browser=r.chrome)},function(t,n,r){r(1),r(0)},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),r.d(n,"randomId",function(){return e}),r.d(n,"getRandomInt",function(){return o});var e=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e=r.length,o=0;o<t;o++)n+=r.charAt(Math.floor(Math.random()*e));return n},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1))+t}}]);